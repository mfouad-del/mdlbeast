<IfModule mod_rewrite.c>
RewriteEngine On

# Block any requests to wp-includes to prevent 404 errors
RewriteRule ^wp-includes/ - [R=404,L]

# ❌ Prevent any Redirect or Rewrite on Next files
RewriteRule ^_next/ - [L]
RewriteRule ^archive/_next/ - [L]

# ❌ Prevent converting or redirecting www on Next files
RewriteCond %{REQUEST_URI} ^/(archive/)?_next/ [NC]
RewriteRule .* - [L]
</IfModule>

# Force canonical host: redirect www to non-www (preserve path)
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{HTTP_HOST} ^www\.zaco\.sa$ [NC]
  RewriteRule ^(.*)$ https://zaco.sa/$1 [R=301,L]
</IfModule>

# Security: prevent directory listing
<IfModule mod_autoindex.c>
  Options -Indexes
</IfModule>
